---
- name: Brew Tap -> bundle core dupes services versions
  homebrew_tap:
    name: "{{ item }}"
    state: present
  with_items: "{{ BREW_TAP_PACKAGES }}"
  tags:
    - config-base
    - config-packages

- name: Brew Untap
  homebrew_tap:
    name: "{{ item }}"
    state: absent
  with_items:
    - homebrew/boneyard
  tags:
    - config-base
    - config-packages

- name: Brew Update
  shell: brew update
  tags:
    - config-base
    - config-packages

- name: Brew Install
  homebrew:
    name: '{{ BREW_PACKAGES | join(",") }}'
    state: present
  ignore_errors: yes
  tags:
    - config-base
    - config-packages

- name: Install Homebrew cask packages
  homebrew_cask:
    name: "{{ item }}"
    state: present
  with_items: "{{ BREW_CASK_PACKAGES }}"
  ignore_errors: yes
  tags:
    - config-base
    - config-packages
