- name: Install ctags/gtags
  shell: |
    brew tap universal-ctags/universal-ctags
    brew install --HEAD universal-ctags/universal-ctags/universal-ctags
    brew install global --with-pygments
  when: "ansible_os_family == 'Darwin'"

- name: Add Apt-Repository
  become: yes
  apt_repository:
    repo: ppa:hnakamur/universal-ctags
  when: ("ansible_os_family == 'Debian'")
  ignore_errors: yes

- name: Install ctags/gtags
  become: yes
  apt:
    name: universal-ctags
    state: present
  when: ("ansible_os_family == 'Debian'")
  ignore_errors: yes

- name: Install vim-plug
  shell: |
    curl -fLo "$HOME/.vim/autoload/plug.vim" --create-dirs \
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim

- name: Install nvim client
  shell: pip3 install neovim
  args:
    executable: /bin/bash

- name: Install kafka
  shell: |
    wget http://ftp.tsukuba.wide.ad.jp/software/apache/kafka/2.2.0/kafka_2.11-2.2.0.tgz
    tar zxvf "kafka_2.11-2.2.0.tgz"
    rm kafka_2.11-2.2.0.tgz
  args:
    executable: /bin/bash

- name: Place fzf.sh
  template:
    src: files/fzf.sh
    dest: "$HOME/.bash.d/fzf.sh"
    mode: 0755

- name: Enable dotfiles
  shell: $SHELL -l
